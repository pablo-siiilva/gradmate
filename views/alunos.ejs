<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index - GradMate</title>
    <link rel="icon" type="image/x-icon" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/alunos.css">
</head>

<body>
<header class="header">
    <img src="img/logo.png" alt="Logo do sistema" id="logo"/>
    <p id="header_leave_button"><a href="#">Sair</a></p>
</header>
<aside class="sidebar">
    <ul>
        <li>Did√°tico</li>
        <li><a href="/meusprojetos">Meus projetos</a></li>
    </ul>
    <% if (typeof cookies !== 'undefined' &&
            typeof cookies !== 'undefined' &&
            cookies.permissions.isAdmin) { %>
        <ul>
            <li>Gerenciar</li>
            <li><a href="/projetos">Projetos</a></li>
            <li><a href="/alunos">Alunos</a></li>
            <li><a href="/professores">Professores</a></li>
            <li><a href="/cursos">Cursos</a></li>
            <li><a href="/usuarios">Usu√°rios</a></li>
        </ul>
    <% } %>
</aside>
<main id="content">
    <div id="top-part">
        <button id="top-part-addbtn">Adicionar ‚ûï</button>
        <input type="text" id="top-part-search"/>
        <button id="top-part-searchbtn">üîç</button>
    </div>
    <div class="list" data-alunos="<%= JSON.stringify(alunos) %>">
        <% if (!alunos || alunos.length === 0) { %>
            <p>Nenhum aluno encontrado!</p>
        <% } %>
    </div>
    <% if (alunos && alunos.length > 0) { %>
        <div class="footer">
            <button class="page-button" onclick="navigate(-1)">‚¨ÖÔ∏è</button>
            <span>P√°gina <span id="currentPage"></span> de <span id="totalPages"></span></span>
            <button class="page-button" onclick="navigate(1)">‚û°Ô∏è</button>
        </div>
    <% } %>
</main>
</body>
<script>
    const alunos = JSON.parse(document.querySelector(".list").dataset.alunos);
    const itemsPerPage = 10;  // Defina quantos itens por p√°gina
    let currentPage = 1;

    const currentPageElement = document.getElementById("currentPage");
    const totalPagesElement = document.getElementById("totalPages");
    const footer = document.querySelector(".footer");

    function renderPage(page) {
        const startIndex = (page - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const pageItems = alunos.slice(startIndex, endIndex);
        if (pageItems.length === 0) {
            return;
        }

        const listContainer = document.querySelector(".list");
        listContainer.innerHTML = "";

        pageItems.forEach(aluno => {
            const listItem = document.createElement("div");
            listItem.className = "list-item";
            listItem.innerText = aluno.nome;
            listContainer.appendChild(listItem);
        });

        currentPageElement.textContent = currentPage;
        totalPagesElement.textContent = Math.ceil(alunos.length / itemsPerPage);

        // Mostrar ou ocultar a navega√ß√£o de p√°gina com base no n√∫mero de alunos
        if (alunos.length <= itemsPerPage) {
            footer.style.display = "none";
        }
    }

    function navigate(direction) {
        const totalPages = Math.ceil(alunos.length / itemsPerPage);
        currentPage += direction;

        if (currentPage < 1) {
            currentPage = 1;
        } else if (currentPage > totalPages) {
            currentPage = totalPages;
        }

        renderPage(currentPage);
    }

    document.addEventListener("DOMContentLoaded", () => {
        renderPage(currentPage);
    })
</script>
</html>